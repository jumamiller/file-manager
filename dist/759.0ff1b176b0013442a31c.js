"use strict";(self.webpackChunkadmin_development=self.webpackChunkadmin_development||[]).push([[759],{7682:(me,P,a)=>{a.r(P),a.d(P,{PressReleaseModule:()=>ge});var c=a(8583),g=a(3423),y=a(7037),R=a(8668),q=a(5299),Z=a(2340),e=a(7716),_=a(5384),E=a(8562),S=a(4142),A=a(2533);const M=function(){return["/admin/press-release/create"]};function N(s,n){1&s&&(e.TgZ(0,"p"),e.TgZ(1,"a",16),e._UZ(2,"i",17),e._uU(3," Add Press Release"),e.qZA(),e.qZA()),2&s&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,M)))}function w(s,n){1&s&&(e.TgZ(0,"th",18),e._uU(1,"View"),e.qZA())}function U(s,n){1&s&&(e.TgZ(0,"th",18),e._uU(1,"Edit"),e.qZA())}function I(s,n){1&s&&(e.TgZ(0,"th",18),e._uU(1,"Remove"),e.qZA())}function J(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"td",22),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).redirectToDetailsPage(r.id)}),e._UZ(2,"i",24),e.qZA(),e.qZA()}}function O(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"td",22),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).redirectToEdit(r.id)}),e._UZ(2,"i",26),e.qZA(),e.qZA()}}function L(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"td",22),e.TgZ(1,"button",27),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).remove(r.id)}),e._UZ(2,"i",28),e.qZA(),e.qZA()}}const p=function(s){return[s,"nav"]};function F(s,n){if(1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"td",19),e._uU(2),e.qZA(),e.TgZ(3,"td",19),e._UZ(4,"img",20),e.qZA(),e.TgZ(5,"td",19),e._uU(6),e.qZA(),e.TgZ(7,"td",19),e._uU(8),e.ALo(9,"slice"),e.qZA(),e.TgZ(10,"td",19),e._uU(11),e.qZA(),e.TgZ(12,"td",19),e._uU(13),e.qZA(),e.YNc(14,J,3,0,"td",21),e.YNc(15,O,3,0,"td",21),e.YNc(16,L,3,0,"td",21),e.qZA()),2&s){const t=n.$implicit,i=n.index,r=e.oxw(2);e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Q6J("src",r.imageURL+t.attachment,e.LSH),e.xp6(2),e.Oqu(t.title),e.xp6(2),e.hij("",e.Dn7(9,10,t.description,0,30),"..."),e.xp6(3),e.Oqu(t.ministry.name),e.xp6(2),e.AsE("",t.user.first_name," ",t.user.last_name,""),e.xp6(1),e.Q6J("appAccessControl",e.VKq(14,p,r.permissionType.VIEW_NEWS_AND_EVENTS)),e.xp6(1),e.Q6J("appAccessControl",e.VKq(16,p,r.permissionType.EDIT_NEWS_AND_EVENTS)),e.xp6(1),e.Q6J("appAccessControl",e.VKq(18,p,r.permissionType.DELETE_NEWS_AND_EVENTS))}}function Y(s,n){1&s&&(e.TgZ(0,"h3"),e._uU(1,"No press releases found!"),e.qZA())}function z(s,n){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,Y,2,0,"h3",14),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0==t.pressReleases.length)}}function Q(s,n){1&s&&(e.TgZ(0,"div",29),e._UZ(1,"div",30),e.qZA())}const D=function(s,n,t){return{itemsPerPage:s,currentPage:n,totalItems:t}};function V(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"h4"),e._uU(4,"List of Press Releases"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,N,4,2,"p",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"table",8),e.TgZ(10,"thead"),e.TgZ(11,"tr"),e.TgZ(12,"th",9),e._uU(13,"#"),e.qZA(),e.TgZ(14,"th",9),e._uU(15,"Banner"),e.qZA(),e.TgZ(16,"th",9),e._uU(17,"Title"),e.qZA(),e.TgZ(18,"th",9),e._uU(19,"Description"),e.qZA(),e.TgZ(20,"th",9),e._uU(21,"Ministry"),e.qZA(),e.TgZ(22,"th",9),e._uU(23,"Created By"),e.qZA(),e.YNc(24,w,2,0,"th",10),e.YNc(25,U,2,0,"th",10),e.YNc(26,I,2,0,"th",10),e.qZA(),e.qZA(),e.TgZ(27,"tbody"),e.YNc(28,F,17,20,"tr",11),e.ALo(29,"paginate"),e.qZA(),e.qZA(),e.TgZ(30,"div",12),e.TgZ(31,"pagination-controls",13),e.NdJ("pageChange",function(r){return e.CHM(t),e.oxw().onTableDataChange(r)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(32,z,2,1,"div",14),e.YNc(33,Q,2,0,"div",15),e.qZA()}if(2&s){const t=e.oxw();e.xp6(6),e.Q6J("appAccessControl",e.VKq(14,p,t.permissionType.CREATE_NEWS_AND_EVENTS)),e.xp6(18),e.Q6J("appAccessControl",e.VKq(16,p,t.permissionType.VIEW_NEWS_AND_EVENTS)),e.xp6(1),e.Q6J("appAccessControl",e.VKq(18,p,t.permissionType.EDIT_NEWS_AND_EVENTS)),e.xp6(1),e.Q6J("appAccessControl",e.VKq(20,p,t.permissionType.DELETE_NEWS_AND_EVENTS)),e.xp6(2),e.Q6J("ngForOf",e.xi3(29,11,t.pressReleases,e.kEZ(22,D,t.tableSize,t.page,t.count))),e.xp6(3),e.Q6J("responsive",!0)("maxSize",7)("directionLinks",!0)("autoHide",!0),e.xp6(1),e.Q6J("ngIf",t.pressReleases),e.xp6(1),e.Q6J("ngIf",t.loading)}}const B=function(s){return[s,"page"]};let j=(()=>{class s{constructor(t,i,r){this.apiService=t,this.confirmationAlert=i,this.router=r,this.page=1,this.count=0,this.tableSize=8,this.permissionType=q.v,this.loading=!0,this.imageURL=Z.N.ASSETS_URL}ngOnInit(){this.getPressReleases()}getPressReleases(){this.apiService.getAllPressReleases().subscribe(t=>{this.pressReleases=t.data,this.loading=!1})}remove(t){this.confirmationAlert.sweetAlert("Are you sure?","Deleting press release is an irreversible process and will cease to show on the main Kogas home page","","","question",!0,"Yes, Delete Press Release!","No, Cancel","",this.apiService.removePressRelease(t))}onTableDataChange(t){this.page=t,this.getPressReleases()}redirectToEdit(t){this.router.navigate(["/admin/press-release/list/edit"],{queryParams:{id:t}})}redirectToDetailsPage(t){this.router.navigate(["/admin/press-release/list/details"],{queryParams:{id:t}})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.s),e.Y36(E.C),e.Y36(g.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-press-release-list"]],decls:1,vars:3,consts:[["class","content mat-elevation-z8",4,"appAccessControl"],[1,"content","mat-elevation-z8"],[1,"row","header","p-3"],[1,"col-md-6"],[1,"col-md-6","content-right"],[4,"appAccessControl"],[1,"citizens","p-3"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-bordered"],["scope","col"],["scope","col","class","text-center",4,"appAccessControl"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-left","p-2","mt-2","pagination-text"],["previousLabel","Prev","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"responsive","maxSize","directionLinks","autoHide","pageChange"],[4,"ngIf"],["class","d-flex justify-content-center my-1",4,"ngIf"],[1,"btn",3,"routerLink"],[1,"fas","fa-plus-circle"],["scope","col",1,"text-center"],[1,""],["alt","","width","100","height","50",3,"src"],["class","text-center",4,"appAccessControl"],[1,"text-center"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-user-edit"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"d-flex","justify-content-center","my-1"],["role","status","aria-hidden","true",1,"spinner-border"]],template:function(t,i){1&t&&e.YNc(0,V,34,26,"div",0),2&t&&e.Q6J("appAccessControl",e.VKq(1,B,i.permissionType.VIEW_NEWS_AND_EVENTS))},directives:[S.J,c.sg,A.LS,c.O5,g.yS],pipes:[A._s,c.OU],styles:['.content[_ngcontent-%COMP%]{height:auto;border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}.header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-style:normal;font-weight:600;font-size:24px;line-height:175.6%;color:#000}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-style:normal;font-weight:600;font-size:16px;line-height:175.6%;color:#fff;width:228px;height:46px;background:#003679;border-radius:3px}.content-right[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{border:2px solid #333333;box-sizing:border-box}thead[_ngcontent-%COMP%]{background:#E1EAFB;font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:16px;line-height:175.6%;color:#333}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:16px;line-height:175.6%;color:#333}.table-totals[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:normal;font-size:18px;line-height:175.6%;color:#000}.pagination-text[_ngcontent-%COMP%]{font-size:12px}h3[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-style:normal;font-weight:600;font-size:26px;line-height:39px;color:#010f93;text-align:center}']}),s})();var x=a(9344),W=a(3537);function H(s,n){if(1&s&&(e.TgZ(0,"h2"),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij("Ministry of ",t.press.ministry.name," Press Statement")}}function k(s,n){1&s&&(e.TgZ(0,"div",5),e._UZ(1,"div",6),e.qZA())}function K(s,n){if(1&s&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e._UZ(2,"img",9),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.xp6(2),e.Q6J("src",t.imageURL+t.press.attachment,e.LSH)}}function G(s,n){if(1&s&&(e.TgZ(0,"div",10),e.TgZ(1,"div",11),e.TgZ(2,"h6"),e._uU(3),e.ALo(4,"dateAgo"),e.TgZ(5,"span",12),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",11),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.xp6(3),e.hij("Posted ",e.lcZ(4,4,t.press.created_at)," By: "),e.xp6(3),e.AsE("",t.press.user.first_name," ",t.press.user.last_name,""),e.xp6(3),e.Oqu(t.press.description)}}let $=(()=>{class s{constructor(t,i,r){this.apiService=t,this.toastrService=i,this.activatedRoute=r,this.loading=!0,this.imageURL=Z.N.ASSETS_URL}ngOnInit(){this.pressId=this.activatedRoute.snapshot.queryParamMap.get("id"),this.getSinglePressRelease()}getSinglePressRelease(){this.apiService.getSinglePressRelease(this.pressId).subscribe(t=>{this.press=t.data,this.loading=!1},t=>{this.toastrService.error(t.error.message,"Error"),this.loading=!1})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.s),e.Y36(x._W),e.Y36(g.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-press-release-details"]],decls:5,vars:4,consts:[[1,"content","mat-elevation-z8"],[4,"ngIf"],["class","d-flex justify-content-center my-1",4,"ngIf"],["class","row press-image",4,"ngIf"],["class","row",4,"ngIf"],[1,"d-flex","justify-content-center","my-1"],["role","status","aria-hidden","true",1,"spinner-border"],[1,"row","press-image"],[1,"col-md-12","p-4"],["alt","press image",3,"src"],[1,"row"],[1,"col-md-12"],[1,"inner-text"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,H,2,1,"h2",1),e.YNc(2,k,2,0,"div",2),e.YNc(3,K,3,1,"div",3),e.YNc(4,G,10,6,"div",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.press),e.xp6(1),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",i.press),e.xp6(1),e.Q6J("ngIf",i.press))},directives:[c.O5],pipes:[W.R],styles:[".content[_ngcontent-%COMP%]{height:auto;border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}h2[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-style:normal;font-weight:600;font-size:26px;line-height:39px;text-align:center;color:#010f93}h6[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-style:normal;font-weight:600;font-size:16px;line-height:39px;text-align:left;color:#010f93;padding:4px}.inner-text[_ngcontent-%COMP%]{color:#ca0c5c}p[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-style:normal;font-weight:normal;font-size:14px;line-height:150%;color:#333;white-space:pre-line;padding:10px}.press-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:600px}"]}),s})();var o=a(3679),C=a(3815);function X(s,n){if(1&s&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("Ministry of ",t.name,"")}}function ee(s,n){1&s&&(e.TgZ(0,"button",20),e._uU(1,"Create Press Release"),e.qZA())}function te(s,n){1&s&&(e.TgZ(0,"button",21),e._uU(1,"Processing...Please Wait..."),e.qZA())}let se=(()=>{class s{constructor(t,i,r){this.apiService=t,this.toastrService=i,this.formBuilder=r,this.loading=!0,this.submitting=!1}ngOnInit(){this.newsFormControls(),this.getMinistries()}getMinistries(){this.apiService.getMinistry().subscribe(t=>{this.ministries=t.data,this.loading=!1},t=>{this.toastrService.error(t.error.message,"Error")})}onMinistryChange(t){this.selectedMinistryId=t.value}newsFormControls(){this.pressForm=this.formBuilder.group({title:["",[o.kI.required]],description:["",[o.kI.required]]})}get form(){return this.pressForm.controls}onPressSubmit(){this.submitting=!0,this.apiService.createPressRelease({description:this.form.description.value,ministry_id:this.selectedMinistryId,title:this.form.title.value,attachment:this.cardImageBase64}).subscribe(i=>{i?(this.toastrService.success(i.message),this.submitting=!1):(this.toastrService.error(i.message,"Failed"),this.submitting=!1)},i=>{this.toastrService.error(i.error.message,"Error"),this.submitting=!1})}handleFileInput(t){if(this.imageError=null,t.target.files&&t.target.files[0]){const i=20971520,r=["image/png","image/jpeg"],l=15200,m=25600;if(t.target.files[0].size>i)return this.imageError="Maximum size allowed is "+i/1e3+"Mb",this.toastrService.error(this.imageError,"Error"),!1;if(!C.includes(r,t.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",this.toastrService.error(this.imageError,"Error"),!1;const d=new FileReader;d.onload=u=>{const f=new Image;f.src=u.target.result,f.onload=h=>{if(h.currentTarget.height>l&&h.currentTarget.width>m)return this.imageError="Maximum dimensions allowed "+l+"*"+m+"px",!1;this.cardImageBase64=u.target.result,this.isImageSaved=!0}},d.readAsDataURL(t.target.files[0])}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.s),e.Y36(x._W),e.Y36(o.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-create-press-release"]],decls:28,vars:4,consts:[[1,"content","mat-elevation-z8"],[1,"text-center","text-dark"],[1,"add-new-user"],[3,"formGroup","ngSubmit"],[1,"form-row","m-3"],[1,"col-md-6"],["for","title"],["type","text","id","title","formControlName","title","placeholder","Agriculture","required","",1,"form-control"],[1,"form-control",3,"change"],["selected","","value","Select ministry"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],["for","description"],["id","description","cols","10","rows","10","formControlName","description","placeholder","","required","",1,"form-control"],["for","news_banner"],["type","file","id","news_banner","required","",1,"form-control-file",3,"change"],[1,"submission","m-4","text-right"],["class","btn btn-danger",4,"ngIf"],["class","btn btn-success",4,"ngIf"],[3,"value"],[1,"btn","btn-danger"],[1,"btn","btn-success"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Add Press Release"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return i.onPressSubmit()}),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"label",6),e._uU(8,"Title"),e.qZA(),e._UZ(9,"input",7),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"label"),e._uU(12,"Ministry"),e.qZA(),e.TgZ(13,"select",8),e.NdJ("change",function(l){return i.onMinistryChange(l.target)}),e.TgZ(14,"option",9),e._uU(15,"Select Press' Ministry"),e.qZA(),e.YNc(16,X,2,2,"option",10),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"label",12),e._uU(19,"Description"),e.qZA(),e._UZ(20,"textarea",13),e.qZA(),e.TgZ(21,"div",5),e.TgZ(22,"label",14),e._uU(23,"Press Banner"),e.qZA(),e.TgZ(24,"input",15),e.NdJ("change",function(l){return i.handleFileInput(l)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",16),e.YNc(26,ee,2,0,"button",17),e.YNc(27,te,2,0,"button",18),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("formGroup",i.pressForm),e.xp6(12),e.Q6J("ngForOf",i.ministries),e.xp6(10),e.Q6J("ngIf",!i.submitting),e.xp6(1),e.Q6J("ngIf",i.submitting))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.Q7,o.YN,o.Kr,c.sg,c.O5],styles:['.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}label[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:20px;line-height:36px;color:#000}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:600;font-size:18px;line-height:27px;color:#b7b7b7}']}),s})();function ie(s,n){1&s&&(e.TgZ(0,"div",4),e._UZ(1,"div",5),e.qZA())}function ne(s,n){if(1&s&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("Ministry of ",t.name,"")}}function re(s,n){1&s&&(e.TgZ(0,"button",26),e._uU(1,"Save Press Release"),e.qZA())}function oe(s,n){1&s&&(e.TgZ(0,"button",27),e._uU(1,"Processing...Please Wait..."),e.qZA())}function ae(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"form",7),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onPressUpdate()}),e.TgZ(2,"div",8),e.TgZ(3,"div",9),e.TgZ(4,"label",10),e._uU(5,"Title"),e.qZA(),e._UZ(6,"input",11),e.qZA(),e.TgZ(7,"div",9),e.TgZ(8,"label"),e._uU(9,"Ministry"),e.qZA(),e.TgZ(10,"select",12),e.NdJ("change",function(r){return e.CHM(t),e.oxw().onMinistryChange(r.target)}),e.TgZ(11,"option",13),e._uU(12,"Select Press' Ministry"),e.qZA(),e.YNc(13,ne,2,2,"option",14),e.qZA(),e.qZA(),e.TgZ(14,"div",15),e.TgZ(15,"label",16),e._uU(16,"Description"),e.qZA(),e._UZ(17,"textarea",17),e.qZA(),e.TgZ(18,"div",9),e.TgZ(19,"label",18),e._uU(20,"Press Banner"),e.qZA(),e.TgZ(21,"input",19),e.NdJ("change",function(r){return e.CHM(t),e.oxw().handleFileInput(r)}),e.qZA(),e.qZA(),e.TgZ(22,"div",20),e.TgZ(23,"h3"),e._uU(24,"Banner Image"),e.qZA(),e._UZ(25,"img",21),e.qZA(),e.qZA(),e.TgZ(26,"div",22),e.YNc(27,re,2,0,"button",23),e.YNc(28,oe,2,0,"button",24),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.pressForm),e.xp6(12),e.Q6J("ngForOf",t.ministries),e.xp6(12),e.Q6J("src",t.imageURL+t.press.attachment,e.LSH),e.xp6(2),e.Q6J("ngIf",!t.submitting),e.xp6(1),e.Q6J("ngIf",t.submitting)}}const ce=[{path:"",component:y.k,canActivate:[R.a],children:[{path:"list",component:j},{path:"list/details",component:$},{path:"list/edit",component:(()=>{class s{constructor(t,i,r,l){this.apiService=t,this.activatedRoute=i,this.toastrService=r,this.formBuilder=l,this.loading=!0,this.submitting=!1,this.imageURL=Z.N.ASSETS_URL}ngOnInit(){this.pressId=this.activatedRoute.snapshot.queryParamMap.get("id"),this.getSinglePressRelease(),this.newsFormControls(),this.getMinistries()}getMinistries(){this.apiService.getMinistry().subscribe(t=>{this.ministries=t.data,this.loading=!1},t=>{this.toastrService.error(t.error.message,"Error")})}onMinistryChange(t){this.selectedMinistryId=t.value}getSinglePressRelease(){this.apiService.getSinglePressRelease(this.pressId).subscribe(t=>{this.press=t.data,this.setFormValues(),this.loading=!1},t=>{this.toastrService.error(t.error.message,"Error"),this.loading=!1})}newsFormControls(){this.pressForm=this.formBuilder.group({title:["",[o.kI.required]],description:["",[o.kI.required]],target_audience:["",[o.kI.required]]})}setFormValues(){this.pressForm.patchValue({title:this.press.title,description:this.press.description})}get form(){return this.pressForm.controls}onPressUpdate(){this.submitting=!0,this.apiService.updatePressRelease({description:this.form.description.value,ministry_id:this.selectedMinistryId,title:this.form.title.value,attachment:this.cardImageBase64},this.pressId).subscribe(i=>{i?(this.toastrService.success(i.message),this.submitting=!1):(this.toastrService.error(i.message,"Failed"),this.submitting=!1)},i=>{this.toastrService.error(i.error.message,"Error"),this.submitting=!1})}handleFileInput(t){if(this.imageError=null,t.target.files&&t.target.files[0]){const i=20971520,r=["image/png","image/jpeg"],l=15200,m=25600;if(t.target.files[0].size>i)return this.imageError="Maximum size allowed is "+i/1e3+"Mb",this.toastrService.error(this.imageError,"Error"),!1;if(!C.includes(r,t.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",this.toastrService.error(this.imageError,"Error"),!1;const d=new FileReader;d.onload=u=>{const f=new Image;f.src=u.target.result,f.onload=h=>{if(h.currentTarget.height>l&&h.currentTarget.width>m)return this.imageError="Maximum dimensions allowed "+l+"*"+m+"px",!1;this.cardImageBase64=u.target.result,this.isImageSaved=!0}},d.readAsDataURL(t.target.files[0])}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.s),e.Y36(g.gz),e.Y36(x._W),e.Y36(o.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-press-release-edit"]],decls:5,vars:2,consts:[[1,"content","mat-elevation-z8"],[1,"text-center","text-dark"],["class","d-flex justify-content-center my-1",4,"ngIf"],["class","add-new-user",4,"ngIf"],[1,"d-flex","justify-content-center","my-1"],["role","status","aria-hidden","true",1,"spinner-border"],[1,"add-new-user"],[3,"formGroup","ngSubmit"],[1,"form-row","m-3"],[1,"col-md-6"],["for","title"],["type","text","id","title","formControlName","title","placeholder","Agriculture","required","",1,"form-control"],[1,"form-control",3,"change"],["selected","","value","Select ministry"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],["for","description"],["id","description","cols","20","rows","20","formControlName","description","placeholder","","required","",1,"form-control"],["for","news_banner"],["type","file","id","news_banner","required","",1,"form-control-file",3,"change"],[1,"col-md-12","banner-image"],["alt","banner",3,"src"],[1,"submission","m-4","text-right"],["class","btn btn-danger mb-3",4,"ngIf"],["class","btn btn-success mb-3",4,"ngIf"],[3,"value"],[1,"btn","btn-danger","mb-3"],[1,"btn","btn-success","mb-3"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Edit Press Statement"),e.qZA(),e.YNc(3,ie,2,0,"div",2),e.YNc(4,ae,29,5,"div",3),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",i.press))},directives:[c.O5,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.Q7,o.YN,o.Kr,c.sg],styles:['.content[_ngcontent-%COMP%]{height:auto;border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}label[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:20px;line-height:36px;color:#000}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-style:normal;font-weight:600;font-size:18px;line-height:27px}.banner-image[_ngcontent-%COMP%]{text-align:center}.banner-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:400px}h3[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-style:normal;font-weight:bold;font-size:24px;line-height:36px;color:#2d2b96;text-align:center}']}),s})()},{path:"create",component:se}]}];let pe=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[g.Bz.forChild(ce)],g.Bz]}),s})();var b=a(4466);let ge=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[c.ez,b.m,pe],b.m]}),s})()}}]);