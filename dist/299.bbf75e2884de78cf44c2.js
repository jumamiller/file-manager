"use strict";(self.webpackChunkadmin_development=self.webpackChunkadmin_development||[]).push([[299],{9299:(Q,_,l)=>{l.r(_),l.d(_,{MinistryModule:()=>B});var m=l(3423),v=l(7037),x=l(3815),t=l(7716),b=l(5384),s=l(3679),A=l(8562),y=l(9344),c=l(8583),T=l(2533);function M(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",37),t._uU(2),t.qZA(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",37),t._uU(6),t.qZA(),t.TgZ(7,"td",37),t._uU(8),t.ALo(9,"slice"),t.qZA(),t.TgZ(10,"td",37),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"td",38),t.TgZ(14,"button",39),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().redirectToSingleMinistry(o.id)}),t._UZ(15,"i",40),t.qZA(),t.qZA(),t.TgZ(16,"td",38),t.TgZ(17,"button",41),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().onMinistrySelection(o.id)}),t._UZ(18,"i",42),t.qZA(),t.qZA(),t.TgZ(19,"td",38),t.TgZ(20,"button",43),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().removeMinistry(o.id)}),t._UZ(21,"i",44),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=r.$implicit,n=r.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.header_text),t.xp6(2),t.Oqu(t.Dn7(9,5,e.description,0,20)),t.xp6(3),t.Oqu(t.lcZ(12,9,e.budget))}}function q(i,r){1&i&&(t.TgZ(0,"div",45),t._UZ(1,"div",46),t.qZA())}function C(i,r){if(1&i&&(t.TgZ(0,"button",47),t._uU(1,"Update Ministry"),t.qZA()),2&i){const e=t.oxw();t.Q6J("disabled",e.editForm.invalid)}}function U(i,r){1&i&&(t.TgZ(0,"button",48),t._uU(1,"updating..."),t.qZA())}const S=function(){return["/admin/ministry/add-new-kogi-ministry"]},w=function(i,r,e){return{itemsPerPage:i,currentPage:r,totalItems:e}};let N=(()=>{class i{constructor(e,n,a,o,d,g){this.apiService=e,this.fb=n,this.route=a,this.confirmationAlert=o,this.toastrService=d,this.router=g,this.submitting=!1,this.ministries=[],this.page=1,this.count=0,this.tableSize=10,this.tableSizes=[2,5,10,20,30,40],this.loading=!0}ngOnInit(){this.editMinistryFormControls(),this.listOfMinistries()}editMinistryFormControls(){this.editForm=this.fb.group({name:[""],header_text:[""],description:[""],budget:[""]})}get form(){return this.editForm.controls}onMinistrySelection(e){this.selectedMinistryId=e}listOfMinistries(){this.apiService.getMinistry().subscribe(e=>{this.ministries=e.data,this.loading=!1})}removeMinistry(e){this.confirmationAlert.sweetAlert("Are you sure?","Deleting ministry is an irreversible process and you confirm that this also affects officials linked to it.","","","question",!0,"Yes, Delete Ministry!","No, Cancel","",this.apiService.removeMinistry(e))}onMinistryUpdate(){this.submitting=!0,this.apiService.updateMinistry({name:this.form.name.value,header_text:this.form.header_text.value,description:this.form.description.value,budget:this.form.budget.value,banner_image:this.cardImageBase64},this.selectedMinistryId).subscribe(n=>{this.toastrService.success(n.message,"Success"),this.submitting=!1,this.reloadCurrentRoute()},n=>{this.toastrService.error(n.error.message,"Error"),this.submitting=!1})}redirectToSingleMinistry(e){this.router.navigate(["/admin/ministry/kogi-ministry-list/ministry-details"],{queryParams:{ministryId:e}})}handleFileInput(e){if(this.imageError=null,e.target.files&&e.target.files[0]){const n=20971520,a=["image/png","image/jpeg"],o=15200,d=25600;if(e.target.files[0].size>n)return this.imageError="Maximum size allowed is "+n/1e3+"Mb",!1;if(!x.includes(a,e.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",!1;const g=new FileReader;g.onload=u=>{const p=new Image;p.src=u.target.result,p.onload=f=>{const h=f.currentTarget.height,Z=f.currentTarget.width;if(console.log(h,Z),h>o&&Z>d)return this.imageError="Maximum dimensions allowed "+o+"*"+d+"px",!1;this.cardImageBase64=u.target.result,this.isImageSaved=!0}},g.readAsDataURL(e.target.files[0])}}reloadCurrentRoute(){let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}onTableDataChange(e){this.page=e,this.listOfMinistries()}onTableSizeChange(e){this.tableSize=e.target.value,this.page=1,this.listOfMinistries()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(s.qu),t.Y36(m.gz),t.Y36(A.C),t.Y36(y._W),t.Y36(m.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ministries-list"]],decls:69,vars:18,consts:[[1,"content","mat-elevation-z8"],[1,"text-right","m-1","p-1"],[1,"btn","btn-danger",3,"routerLink"],[1,"citizens"],[1,"table-responsive"],[1,"text-center","text-dark"],[1,"table","table-striped","table-hover","table-bordered"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-left","p-2","mt-2","pagination-text"],["previousLabel","Prev","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"responsive","maxSize","directionLinks","autoHide","pageChange"],["class","d-flex justify-content-center my-1",4,"ngIf"],["data-backdrop","false","id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","budget"],["type","text","id","budget","formControlName","budget",1,"form-control"],["for","file"],["type","file","id","file","placeholder","",1,"form-control-file",3,"change"],["for","header_text"],["cols","3","rows","3","id","header_text","formControlName","header_text",1,"form-control"],["for","description"],["cols","7","rows","7","id","description","formControlName","description",1,"form-control"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","submit","class","btn btn-danger",3,"disabled",4,"ngIf"],["type","button","class","btn btn-success",4,"ngIf"],[1,""],[1,"text-center"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-eye"],["data-toggle","modal","data-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"fas","fa-user-edit"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"d-flex","justify-content-center","my-1"],["role","status","aria-hidden","true",1,"spinner-border"],["type","submit",1,"btn","btn-danger",3,"disabled"],["type","button",1,"btn","btn-success"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"p",1),t.TgZ(2,"a",2),t._uU(3,"Add New Ministry"),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"h4",5),t._uU(7,"Kogi Ministries"),t.qZA(),t.TgZ(8,"table",6),t.TgZ(9,"thead"),t.TgZ(10,"tr"),t.TgZ(11,"th",7),t._uU(12,"#"),t.qZA(),t.TgZ(13,"th",7),t._uU(14,"Name"),t.qZA(),t.TgZ(15,"th",7),t._uU(16,"Header Text"),t.qZA(),t.TgZ(17,"th",7),t._uU(18,"Description"),t.qZA(),t.TgZ(19,"th",7),t._uU(20,"Budget"),t.qZA(),t.TgZ(21,"th",8),t._uU(22,"View"),t.qZA(),t.TgZ(23,"th",8),t._uU(24,"Edit"),t.qZA(),t.TgZ(25,"th",8),t._uU(26,"Remove"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"tbody"),t.YNc(28,M,22,11,"tr",9),t.ALo(29,"paginate"),t.qZA(),t.qZA(),t.TgZ(30,"div",10),t.TgZ(31,"pagination-controls",11),t.NdJ("pageChange",function(o){return n.onTableDataChange(o)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(32,q,2,0,"div",12),t.qZA(),t.TgZ(33,"div",13),t.TgZ(34,"div",14),t.TgZ(35,"div",15),t.TgZ(36,"div",16),t.TgZ(37,"h5",17),t._uU(38,"Edit Ministry"),t.qZA(),t.TgZ(39,"button",18),t.TgZ(40,"span",19),t._uU(41,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",20),t.TgZ(43,"form",21),t.NdJ("ngSubmit",function(){return n.onMinistryUpdate()}),t.TgZ(44,"div",22),t.TgZ(45,"label",23),t._uU(46,"Ministry Name"),t.qZA(),t._UZ(47,"input",24),t.qZA(),t.TgZ(48,"div",22),t.TgZ(49,"label",25),t._uU(50,"Ministry Budget"),t.qZA(),t._UZ(51,"input",26),t.qZA(),t.TgZ(52,"div",22),t.TgZ(53,"label",27),t._uU(54,"Upload Image"),t.qZA(),t.TgZ(55,"input",28),t.NdJ("change",function(o){return n.handleFileInput(o)}),t.qZA(),t.qZA(),t.TgZ(56,"div",22),t.TgZ(57,"label",29),t._uU(58,"Header Into Text"),t.qZA(),t._UZ(59,"textarea",30),t.qZA(),t.TgZ(60,"div",22),t.TgZ(61,"label",31),t._uU(62,"Description"),t.qZA(),t._UZ(63,"textarea",32),t.qZA(),t.TgZ(64,"div",33),t.TgZ(65,"button",34),t._uU(66,"Close"),t.qZA(),t.YNc(67,C,2,1,"button",35),t.YNc(68,U,2,0,"button",36),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("routerLink",t.DdM(13,S)),t.xp6(26),t.Q6J("ngForOf",t.xi3(29,10,n.ministries,t.kEZ(14,w,n.tableSize,n.page,n.count))),t.xp6(3),t.Q6J("responsive",!0)("maxSize",7)("directionLinks",!0)("autoHide",!0),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(11),t.Q6J("formGroup",n.editForm),t.xp6(24),t.Q6J("ngIf",!n.submitting),t.xp6(1),t.Q6J("ngIf",n.submitting))},directives:[m.yS,c.sg,T.LS,c.O5,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u],pipes:[T._s,c.OU,c.H9],styles:['.content[_ngcontent-%COMP%]{height:auto;border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}table[_ngcontent-%COMP%]{border:2px solid #333333;box-sizing:border-box}thead[_ngcontent-%COMP%]{background:#E1EAFB;font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:16px;line-height:175.6%;color:#333}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:16px;line-height:175.6%;color:#333}.table-totals[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:normal;font-size:18px;line-height:175.6%;color:#000}.pagination-text[_ngcontent-%COMP%]{font-size:14px;text-align:right}']}),i})();var I=l(2340);function L(i,r){1&i&&(t.TgZ(0,"div",3),t._UZ(1,"div",4),t.qZA())}function O(i,r){if(1&i&&(t.TgZ(0,"div",10),t._UZ(1,"img",11),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("src",e.imageURL+e.ministry.banner_image,t.LSH)}}function P(i,r){if(1&i&&(t.TgZ(0,"div",5),t.TgZ(1,"h4",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7),t.YNc(4,O,2,1,"div",8),t.TgZ(5,"div",9),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.hij("",e.ministry.name," Detailed Information"),t.xp6(2),t.Q6J("ngIf",e.ministry),t.xp6(3),t.Oqu(e.ministry.description||"No description is available")}}let J=(()=>{class i{constructor(e,n,a){this.apiService=e,this.route=n,this.toastrService=a,this.loading=!0,this.imageURL=I.N.ASSETS_URL}ngOnInit(){this.getSingleMinistry()}getSingleMinistry(){let e=this.route.snapshot.queryParamMap.get("ministryId");this.apiService.showSingleMinistry(e).subscribe(n=>{this.ministry=n.data,console.log(this.imageURL+this.ministry.banner_image),this.toastrService.success(n.message,"Success"),this.loading=!1},n=>{this.toastrService.error(n.error.message,"Error")})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(m.gz),t.Y36(y._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-single-ministry-details"]],decls:3,vars:2,consts:[[1,"mat-elevation-z8","content"],["class","d-flex justify-content-center my-1",4,"ngIf"],["class","",4,"ngIf"],[1,"d-flex","justify-content-center","my-1"],["role","status","aria-hidden","true",1,"spinner-border"],[1,""],[1,"text-center"],[1,"row"],["class","col-md-8",4,"ngIf"],[1,"col-md-4"],[1,"col-md-8"],["alt","image",2,"width","100%",3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,L,2,0,"div",1),t.YNc(2,P,8,3,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.ministry))},directives:[c.O5],styles:['.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}p[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:18px;line-height:175.6%;text-align:justify;color:#000}']}),i})();function z(i,r){1&i&&(t.TgZ(0,"button",20),t._uU(1,"Add Ministry"),t.qZA())}function F(i,r){1&i&&(t.TgZ(0,"button",21),t._uU(1,"Adding Ministry..."),t.qZA())}let Y=(()=>{class i{constructor(e,n,a){this.formBuilder=e,this.apiService=n,this.toastrService=a,this.submitting=!1}ngOnInit(){this.ministryFormControl()}ministryFormControl(){this.ministryForm=this.formBuilder.group({name:["",s.kI.required],header_text:["",s.kI.required],description:["",s.kI.required],address:["",s.kI.required],budget:["",s.kI.required]})}get form(){return this.ministryForm.controls}onSubmit(){this.submitting=!0,this.apiService.addMinistry({budget:this.form.budget.value,description:this.form.description.value,name:this.form.name.value,header_text:this.form.header_text.value,banner_image:this.cardImageBase64}).subscribe(n=>{this.toastrService.success(n.message,"Success"),this.submitting=!1},n=>{this.toastrService.error(n.error.message,"Error"),this.submitting=!1})}handleFileInput(e){if(this.imageError=null,e.target.files&&e.target.files[0]){const n=20971520,a=["image/png","image/jpeg"],o=15200,d=25600;if(e.target.files[0].size>n)return this.imageError="Maximum size allowed is "+n/1e3+"Mb",!1;if(!x.includes(a,e.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",!1;const g=new FileReader;g.onload=u=>{const p=new Image;p.src=u.target.result,p.onload=f=>{const h=f.currentTarget.height,Z=f.currentTarget.width;if(console.log(h,Z),h>o&&Z>d)return this.imageError="Maximum dimensions allowed "+o+"*"+d+"px",!1;this.cardImageBase64=u.target.result,console.log(this.cardImageBase64),this.isImageSaved=!0}},g.readAsDataURL(e.target.files[0])}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.qu),t.Y36(b.s),t.Y36(y._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-new-ministry"]],decls:29,vars:3,consts:[[1,"content","mat-elevation-z8"],[1,"text-center","text-dark"],[1,"add-new-user"],[3,"formGroup","ngSubmit"],[1,"form-row","m-3"],[1,"col-md-4"],["for","name"],["type","text","id","name","formControlName","name","placeholder","","required","",1,"form-control"],["for","budget"],["type","number","id","budget","formControlName","budget","placeholder","","required","",1,"form-control"],["for","file"],["type","file","id","file","placeholder","","required","",1,"form-control-file",3,"change"],[1,"col-md-12"],["for","header_text"],["cols","3","rows","3","id","header_text","formControlName","header_text","required","",1,"form-control"],["for","description"],["cols","7","rows","7","id","description","formControlName","description","required","",1,"form-control"],[1,"submission","m-4","text-right"],["class","btn btn-danger",4,"ngIf"],["class","btn btn-success",4,"ngIf"],[1,"btn","btn-danger"],[1,"btn","btn-success"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"Add New Ministry"),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t._uU(8,"Name"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"label",8),t._uU(12,"Expected Annual Budget"),t.qZA(),t._UZ(13,"input",9),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"label",10),t._uU(16,"Upload Image"),t.qZA(),t.TgZ(17,"input",11),t.NdJ("change",function(o){return n.handleFileInput(o)}),t.qZA(),t.qZA(),t.TgZ(18,"div",12),t.TgZ(19,"label",13),t._uU(20,"Header Into Text"),t.qZA(),t._UZ(21,"textarea",14),t.qZA(),t.TgZ(22,"div",12),t.TgZ(23,"label",15),t._uU(24,"Description"),t.qZA(),t._UZ(25,"textarea",16),t.qZA(),t.qZA(),t.TgZ(26,"div",17),t.YNc(27,z,2,0,"button",18),t.YNc(28,F,2,0,"button",19),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("formGroup",n.ministryForm),t.xp6(23),t.Q6J("ngIf",!n.submitting),t.xp6(1),t.Q6J("ngIf",n.submitting))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.Q7,s.wV,c.O5],styles:['.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}label[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:20px;line-height:36px;color:#000}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:600;font-size:18px;line-height:27px;color:#b7b7b7}']}),i})();var k=l(8668);const D=[{path:"",component:v.k,canActivate:[k.a],children:[{path:"kogi-ministries-list",component:N},{path:"kogi-ministry-list/ministry-details",component:J},{path:"add-new-kogi-ministry",component:Y}]}];let E=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(D)],m.Bz]}),i})();var R=l(4466);let B=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[E,R.m]]}),i})()}}]);