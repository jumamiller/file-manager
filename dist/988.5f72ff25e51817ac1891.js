"use strict";(self.webpackChunkadmin_development=self.webpackChunkadmin_development||[]).push([[988],{1988:(R,x,u)=>{u.r(x),u.d(x,{BureausModule:()=>Q});var d=u(8583),c=u(3423),A=u(7037),q=u(8668),v=u(3815),e=u(7716),Z=u(5384),o=u(3679),C=u(8562),_=u(9344),T=u(2533);function B(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",37),e._uU(2),e.qZA(),e.TgZ(3,"td",37),e._uU(4),e.qZA(),e.TgZ(5,"td",37),e._uU(6),e.qZA(),e.TgZ(7,"td",37),e._uU(8),e.ALo(9,"slice"),e.qZA(),e.TgZ(10,"td",37),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"td",38),e.TgZ(14,"button",39),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().redirectToSingleBureau(a.id)}),e._UZ(15,"i",40),e.qZA(),e.qZA(),e.TgZ(16,"td",38),e.TgZ(17,"button",41),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().onBureauSelection(a.id)}),e._UZ(18,"i",42),e.qZA(),e.qZA(),e.TgZ(19,"td",38),e.TgZ(20,"button",43),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().removeBureau(a.id)}),e._UZ(21,"i",44),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit,r=i.index;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.header_text),e.xp6(2),e.Oqu(e.Dn7(9,5,t.description,0,20)),e.xp6(3),e.Oqu(e.lcZ(12,9,t.budget))}}function y(n,i){1&n&&(e.TgZ(0,"div",45),e._UZ(1,"div",46),e.qZA())}function U(n,i){if(1&n&&(e.TgZ(0,"button",47),e._uU(1,"Update Bureau"),e.qZA()),2&n){const t=e.oxw();e.Q6J("disabled",t.editForm.invalid)}}function S(n,i){1&n&&(e.TgZ(0,"button",48),e._uU(1,"updating..."),e.qZA())}const I=function(){return["/admin/bureaus/add-bureau"]},M=function(n,i,t){return{itemsPerPage:n,currentPage:i,totalItems:t}};let L=(()=>{class n{constructor(t,r,s,a,l,g){this.apiService=t,this.fb=r,this.route=s,this.confirmationAlert=a,this.toastrService=l,this.router=g,this.submitting=!1,this.bureaus=[],this.page=1,this.count=0,this.tableSize=10,this.tableSizes=[2,5,10,20,30,40],this.loading=!0}ngOnInit(){this.editBureauFormControls(),this.getBureaus()}editBureauFormControls(){this.editForm=this.fb.group({name:[""],header_text:[""],description:[""],budget:[""]})}get form(){return this.editForm.controls}onBureauSelection(t){this.selectedBureauId=t}getBureaus(){this.apiService.getBureaus().subscribe(t=>{this.bureaus=t.data,this.loading=!1})}removeBureau(t){this.confirmationAlert.sweetAlert("Are you sure?","Deleting bureau is an irreversible process and you confirm that this also affects officials linked to it.","","","question",!0,"Yes, Delete Bureau!","No, Cancel","",this.apiService.removeBureau(t))}onBureauUpdate(){this.submitting=!0,this.apiService.updateBureaus({name:this.form.name.value,header_text:this.form.header_text.value,description:this.form.description.value,budget:this.form.budget.value,banner_image:this.cardImageBase64},this.selectedBureauId).subscribe(r=>{this.toastrService.success(r.message,"Success"),this.submitting=!1,this.reloadCurrentRoute()},r=>{this.toastrService.error(r.error.message,"Error"),this.submitting=!1})}redirectToSingleBureau(t){this.router.navigate(["/admin/bureaus/bureau-list/bureau-details"],{queryParams:{bureauId:t}})}handleFileInput(t){if(this.imageError=null,t.target.files&&t.target.files[0]){const r=20971520,s=["image/png","image/jpeg"],a=15200,l=25600;if(t.target.files[0].size>r)return this.imageError="Maximum size allowed is "+r/1e3+"Mb",!1;if(!v.includes(s,t.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",!1;const g=new FileReader;g.onload=m=>{const p=new Image;p.src=m.target.result,p.onload=f=>{const h=f.currentTarget.height,b=f.currentTarget.width;if(console.log(h,b),h>a&&b>l)return this.imageError="Maximum dimensions allowed "+a+"*"+l+"px",!1;this.cardImageBase64=m.target.result,this.isImageSaved=!0}},g.readAsDataURL(t.target.files[0])}}reloadCurrentRoute(){let t=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([t])})}onTableDataChange(t){this.page=t,this.getBureaus()}onTableSizeChange(t){this.tableSize=t.target.value,this.page=1,this.getBureaus()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.s),e.Y36(o.qu),e.Y36(c.gz),e.Y36(C.C),e.Y36(_._W),e.Y36(c.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-bureaus-list"]],decls:69,vars:18,consts:[[1,"content","mat-elevation-z8"],[1,"text-right","m-1","p-1"],[1,"btn","btn-danger",3,"routerLink"],[1,"citizens"],[1,"table-responsive"],[1,"text-center","text-dark"],[1,"table","table-striped","table-hover","table-bordered"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-left","p-2","mt-2","pagination-text"],["previousLabel","Prev","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"responsive","maxSize","directionLinks","autoHide","pageChange"],["class","d-flex justify-content-center my-1",4,"ngIf"],["data-backdrop","false","id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","budget"],["type","text","id","budget","formControlName","budget",1,"form-control"],["for","file"],["type","file","id","file","placeholder","",1,"form-control-file",3,"change"],["for","header_text"],["cols","3","rows","3","id","header_text","formControlName","header_text",1,"form-control"],["for","description"],["cols","7","rows","7","id","description","formControlName","description",1,"form-control"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","submit","class","btn btn-danger",3,"disabled",4,"ngIf"],["type","button","class","btn btn-success",4,"ngIf"],[1,""],[1,"text-center"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-eye"],["data-toggle","modal","data-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"fas","fa-user-edit"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"d-flex","justify-content-center","my-1"],["role","status","aria-hidden","true",1,"spinner-border"],["type","submit",1,"btn","btn-danger",3,"disabled"],["type","button",1,"btn","btn-success"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"p",1),e.TgZ(2,"a",2),e._uU(3,"Add New Bureau"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"h4",5),e._uU(7,"Kogi Bureaus"),e.qZA(),e.TgZ(8,"table",6),e.TgZ(9,"thead"),e.TgZ(10,"tr"),e.TgZ(11,"th",7),e._uU(12,"#"),e.qZA(),e.TgZ(13,"th",7),e._uU(14,"Name"),e.qZA(),e.TgZ(15,"th",7),e._uU(16,"Header Text"),e.qZA(),e.TgZ(17,"th",7),e._uU(18,"Description"),e.qZA(),e.TgZ(19,"th",7),e._uU(20,"Budget"),e.qZA(),e.TgZ(21,"th",8),e._uU(22,"View"),e.qZA(),e.TgZ(23,"th",8),e._uU(24,"Edit"),e.qZA(),e.TgZ(25,"th",8),e._uU(26,"Remove"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"tbody"),e.YNc(28,B,22,11,"tr",9),e.ALo(29,"paginate"),e.qZA(),e.qZA(),e.TgZ(30,"div",10),e.TgZ(31,"pagination-controls",11),e.NdJ("pageChange",function(a){return r.onTableDataChange(a)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(32,y,2,0,"div",12),e.qZA(),e.TgZ(33,"div",13),e.TgZ(34,"div",14),e.TgZ(35,"div",15),e.TgZ(36,"div",16),e.TgZ(37,"h5",17),e._uU(38,"Edit Ministry"),e.qZA(),e.TgZ(39,"button",18),e.TgZ(40,"span",19),e._uU(41,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",20),e.TgZ(43,"form",21),e.NdJ("ngSubmit",function(){return r.onBureauUpdate()}),e.TgZ(44,"div",22),e.TgZ(45,"label",23),e._uU(46,"Name"),e.qZA(),e._UZ(47,"input",24),e.qZA(),e.TgZ(48,"div",22),e.TgZ(49,"label",25),e._uU(50,"Budget"),e.qZA(),e._UZ(51,"input",26),e.qZA(),e.TgZ(52,"div",22),e.TgZ(53,"label",27),e._uU(54,"Upload Image"),e.qZA(),e.TgZ(55,"input",28),e.NdJ("change",function(a){return r.handleFileInput(a)}),e.qZA(),e.qZA(),e.TgZ(56,"div",22),e.TgZ(57,"label",29),e._uU(58,"Header Into Text"),e.qZA(),e._UZ(59,"textarea",30),e.qZA(),e.TgZ(60,"div",22),e.TgZ(61,"label",31),e._uU(62,"Description"),e.qZA(),e._UZ(63,"textarea",32),e.qZA(),e.TgZ(64,"div",33),e.TgZ(65,"button",34),e._uU(66,"Close"),e.qZA(),e.YNc(67,U,2,1,"button",35),e.YNc(68,S,2,0,"button",36),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(13,I)),e.xp6(26),e.Q6J("ngForOf",e.xi3(29,10,r.bureaus,e.kEZ(14,M,r.tableSize,r.page,r.count))),e.xp6(3),e.Q6J("responsive",!0)("maxSize",7)("directionLinks",!0)("autoHide",!0),e.xp6(1),e.Q6J("ngIf",r.loading),e.xp6(11),e.Q6J("formGroup",r.editForm),e.xp6(24),e.Q6J("ngIf",!r.submitting),e.xp6(1),e.Q6J("ngIf",r.submitting))},directives:[c.yS,d.sg,T.LS,d.O5,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u],pipes:[T._s,d.OU,d.H9],styles:['.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}table[_ngcontent-%COMP%]{border:2px solid #333333;box-sizing:border-box}thead[_ngcontent-%COMP%]{background:#E1EAFB;font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:16px;line-height:175.6%;color:#333}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:16px;line-height:175.6%;color:#333}.table-totals[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:normal;font-size:18px;line-height:175.6%;color:#000}.pagination-text[_ngcontent-%COMP%]{font-size:14px;text-align:right}']}),n})();function w(n,i){1&n&&(e.TgZ(0,"button",20),e._uU(1,"Add Bureau"),e.qZA())}function N(n,i){1&n&&(e.TgZ(0,"button",21),e._uU(1,"Adding Bureau..."),e.qZA())}let P=(()=>{class n{constructor(t,r,s){this.formBuilder=t,this.apiService=r,this.toastrService=s,this.submitting=!1}ngOnInit(){this.bureauFormControl()}bureauFormControl(){this.bureauForm=this.formBuilder.group({name:["",o.kI.required],header_text:["",o.kI.required],description:["",o.kI.required],address:["",o.kI.required],budget:["",o.kI.required]})}get form(){return this.bureauForm.controls}onSubmit(){this.submitting=!0,this.apiService.addBureau({budget:this.form.budget.value,description:this.form.description.value,name:this.form.name.value,header_text:this.form.header_text.value,banner_image:this.cardImageBase64}).subscribe(r=>{this.toastrService.success(r.message,"Success"),this.submitting=!1},r=>{this.toastrService.error(r.error.message,"Error"),this.submitting=!1})}handleFileInput(t){if(this.imageError=null,t.target.files&&t.target.files[0]){const r=20971520,s=["image/png","image/jpeg"],a=15200,l=25600;if(t.target.files[0].size>r)return this.imageError="Maximum size allowed is "+r/1e3+"Mb",!1;if(!v.includes(s,t.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",!1;const g=new FileReader;g.onload=m=>{const p=new Image;p.src=m.target.result,p.onload=f=>{const h=f.currentTarget.height,b=f.currentTarget.width;if(console.log(h,b),h>a&&b>l)return this.imageError="Maximum dimensions allowed "+a+"*"+l+"px",!1;this.cardImageBase64=m.target.result,console.log(this.cardImageBase64),this.isImageSaved=!0}},g.readAsDataURL(t.target.files[0])}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(o.qu),e.Y36(Z.s),e.Y36(_._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-bureaus"]],decls:29,vars:3,consts:[[1,"content","mat-elevation-z8"],[1,"text-center","text-dark"],[1,"add-new-user"],[3,"formGroup","ngSubmit"],[1,"form-row","m-3"],[1,"col-md-4"],["for","name"],["type","text","id","name","formControlName","name","placeholder","","required","",1,"form-control"],["for","budget"],["type","number","id","budget","formControlName","budget","placeholder","","required","",1,"form-control"],["for","file"],["type","file","id","file","placeholder","","required","",1,"form-control-file",3,"change"],[1,"col-md-12"],["for","header_text"],["cols","3","rows","3","id","header_text","formControlName","header_text","required","",1,"form-control"],["for","description"],["cols","7","rows","7","id","description","formControlName","description","required","",1,"form-control"],[1,"submission","m-4","text-right"],["class","btn btn-danger",4,"ngIf"],["class","btn btn-success",4,"ngIf"],[1,"btn","btn-danger"],[1,"btn","btn-success"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Add New Bureau"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"label",6),e._uU(8,"Name"),e.qZA(),e._UZ(9,"input",7),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"label",8),e._uU(12,"Expected Annual Budget"),e.qZA(),e._UZ(13,"input",9),e.qZA(),e.TgZ(14,"div",5),e.TgZ(15,"label",10),e._uU(16,"Upload Image"),e.qZA(),e.TgZ(17,"input",11),e.NdJ("change",function(a){return r.handleFileInput(a)}),e.qZA(),e.qZA(),e.TgZ(18,"div",12),e.TgZ(19,"label",13),e._uU(20,"Header Into Text"),e.qZA(),e._UZ(21,"textarea",14),e.qZA(),e.TgZ(22,"div",12),e.TgZ(23,"label",15),e._uU(24,"Description"),e.qZA(),e._UZ(25,"textarea",16),e.qZA(),e.qZA(),e.TgZ(26,"div",17),e.YNc(27,w,2,0,"button",18),e.YNc(28,N,2,0,"button",19),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("formGroup",r.bureauForm),e.xp6(23),e.Q6J("ngIf",!r.submitting),e.xp6(1),e.Q6J("ngIf",r.submitting))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.Q7,o.wV,d.O5],styles:['.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}label[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:20px;line-height:36px;color:#000}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:600;font-size:18px;line-height:27px;color:#b7b7b7}']}),n})();var z=u(2340);function J(n,i){1&n&&(e.TgZ(0,"div",3),e._UZ(1,"div",4),e.qZA())}function O(n,i){if(1&n&&(e.TgZ(0,"div",10),e._UZ(1,"img",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.imageURL+t.bureau.banner_image,e.LSH)}}function F(n,i){if(1&n&&(e.TgZ(0,"div",5),e.TgZ(1,"h4",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,O,2,1,"div",8),e.TgZ(5,"div",9),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij("",t.bureau.name," Detailed Information"),e.xp6(2),e.Q6J("ngIf",t.bureau),e.xp6(3),e.Oqu(t.bureau.description||"No description is available")}}const D=[{path:"",component:A.k,canActivate:[q.a],children:[{path:"bureau-list",component:L},{path:"add-bureau",component:P},{path:"bureau-list/bureau-details",component:(()=>{class n{constructor(t,r,s){this.apiService=t,this.route=r,this.toastrService=s,this.loading=!0,this.imageURL=z.N.ASSETS_URL}ngOnInit(){this.getSingleMinistry()}getSingleMinistry(){let t=this.route.snapshot.queryParamMap.get("bureauId");this.apiService.getSingleBureau(t).subscribe(r=>{this.bureau=r.data,this.toastrService.success(r.message,"Success"),this.loading=!1},r=>{this.toastrService.error(r.error.message,"Error")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.s),e.Y36(c.gz),e.Y36(_._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-single-bureau-details"]],decls:3,vars:2,consts:[[1,"mat-elevation-z8","content"],["class","d-flex justify-content-center my-1",4,"ngIf"],["class","",4,"ngIf"],[1,"d-flex","justify-content-center","my-1"],["role","status","aria-hidden","true",1,"spinner-border"],[1,""],[1,"text-center"],[1,"row"],["class","col-md-8",4,"ngIf"],[1,"col-md-4"],[1,"col-md-8"],["alt","image",2,"width","100%",3,"src"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,J,2,0,"div",1),e.YNc(2,F,8,3,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",r.bureau))},directives:[d.O5],styles:['.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}p[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:18px;line-height:175.6%;text-align:justify;color:#000}']}),n})()}]}];let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.Bz.forChild(D)],c.Bz]}),n})();var k=u(4466);let Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,k.m,E]]}),n})()}}]);