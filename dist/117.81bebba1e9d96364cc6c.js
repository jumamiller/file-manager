"use strict";(self.webpackChunkadmin_development=self.webpackChunkadmin_development||[]).push([[117],{4117:(k,m,o)=>{o.r(m),o.d(m,{NewsModule:()=>K});var p=o(8583),d=o(3423),N=o(7037),A=o(2340),w=o(5299),t=o(7716),g=o(5384),v=o(8562),u=o(9344),x=o(4142);const b=function(){return["/admin/news/add-news"]};function C(e,s){1&e&&(t.TgZ(0,"p",11),t.TgZ(1,"a",12),t._uU(2,"Create News/ Events"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,b)))}function q(e,s){1&e&&(t.TgZ(0,"th",13),t._uU(1,"View"),t.qZA())}function E(e,s){1&e&&(t.TgZ(0,"th",13),t._uU(1,"Edit"),t.qZA())}function y(e,s){1&e&&(t.TgZ(0,"th",13),t._uU(1,"Remove"),t.qZA())}function S(e,s){1&e&&(t.TgZ(0,"td",17),t.TgZ(1,"button",18),t._UZ(2,"i",19),t.qZA(),t.qZA())}function U(e,s){1&e&&(t.TgZ(0,"td",17),t.TgZ(1,"button",20),t._UZ(2,"i",21),t.qZA(),t.qZA())}function J(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"td",17),t.TgZ(1,"button",22),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit;return t.oxw(2).remove(r.id)}),t._UZ(2,"i",23),t.qZA(),t.qZA()}}const c=function(e){return[e,"nav"]};function L(e,s){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",14),t._uU(2),t.qZA(),t.TgZ(3,"td",14),t._UZ(4,"img",15),t.qZA(),t.TgZ(5,"td",14),t._uU(6),t.qZA(),t.TgZ(7,"td",14),t._uU(8),t.qZA(),t.TgZ(9,"td",14),t._uU(10),t.qZA(),t.YNc(11,S,3,0,"td",16),t.YNc(12,U,3,0,"td",16),t.YNc(13,J,3,0,"td",16),t.qZA()),2&e){const n=s.$implicit,i=s.index,r=t.oxw(2);t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Q6J("src",r.imageURL+n.image_path,t.LSH),t.xp6(2),t.Oqu(n.title),t.xp6(2),t.Oqu(n.description),t.xp6(2),t.Oqu(n.target_audience),t.xp6(1),t.Q6J("appAccessControl",t.VKq(8,c,r.permissionType.VIEW_NEWS_AND_EVENTS)),t.xp6(1),t.Q6J("appAccessControl",t.VKq(10,c,r.permissionType.EDIT_NEWS_AND_EVENTS)),t.xp6(1),t.Q6J("appAccessControl",t.VKq(12,c,r.permissionType.DELETE_NEWS_AND_EVENTS))}}function D(e,s){1&e&&(t.TgZ(0,"div",24),t._UZ(1,"div",25),t.qZA())}function M(e,s){if(1&e&&(t.TgZ(0,"div",1),t.YNc(1,C,3,2,"p",2),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"h4",5),t._uU(5,"Kogi News & Events"),t.qZA(),t.TgZ(6,"table",6),t.TgZ(7,"thead"),t.TgZ(8,"tr"),t.TgZ(9,"th",7),t._uU(10,"#"),t.qZA(),t.TgZ(11,"th",7),t._uU(12,"Banner"),t.qZA(),t.TgZ(13,"th",7),t._uU(14,"Title"),t.qZA(),t.TgZ(15,"th",7),t._uU(16,"Description"),t.qZA(),t.TgZ(17,"th",7),t._uU(18,"Target Audience"),t.qZA(),t.YNc(19,q,2,0,"th",8),t.YNc(20,E,2,0,"th",8),t.YNc(21,y,2,0,"th",8),t.qZA(),t.qZA(),t.TgZ(22,"tbody"),t.YNc(23,L,14,14,"tr",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(24,D,2,0,"div",10),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("appAccessControl",t.VKq(6,c,n.permissionType.CREATE_NEWS_AND_EVENTS)),t.xp6(18),t.Q6J("appAccessControl",t.VKq(8,c,n.permissionType.VIEW_NEWS_AND_EVENTS)),t.xp6(1),t.Q6J("appAccessControl",t.VKq(10,c,n.permissionType.EDIT_NEWS_AND_EVENTS)),t.xp6(1),t.Q6J("appAccessControl",t.VKq(12,c,n.permissionType.DELETE_NEWS_AND_EVENTS)),t.xp6(2),t.Q6J("ngForOf",n.news),t.xp6(1),t.Q6J("ngIf",n.loading)}}const O=function(e){return[e,"page"]};let F=(()=>{class e{constructor(n,i,r){this.apiService=n,this.confirmationAlert=i,this.toastrService=r,this.permissionType=w.v,this.loading=!0,this.imageURL=A.N.ASSETS_URL}ngOnInit(){this.getNews()}getNews(){this.apiService.getNews().subscribe(n=>{this.news=n.data,this.loading=!1})}remove(n){this.confirmationAlert.sweetAlert("Are you sure?","Deleting news/event is an irreversible process and will cease to show on the main Kogas home page","","","question",!0,"Yes, Delete News!","No, Cancel","",this.apiService.removeNews(n))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.s),t.Y36(v.C),t.Y36(u._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-news-list"]],decls:1,vars:3,consts:[["class","content mat-elevation-z8",4,"appAccessControl"],[1,"content","mat-elevation-z8"],["class","m-1 p-1 text-right",4,"appAccessControl"],[1,"citizens"],[1,"table-responsive"],[1,"text-center","text-dark"],[1,"table","table-striped","table-hover","table-bordered"],["scope","col"],["scope","col","class","text-center",4,"appAccessControl"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center my-1",4,"ngIf"],[1,"m-1","p-1","text-right"],[1,"btn","btn-danger",3,"routerLink"],["scope","col",1,"text-center"],[1,""],["alt","","width","100","height","50",3,"src"],["class","text-center",4,"appAccessControl"],[1,"text-center"],[1,"btn","btn-success"],[1,"fas","fa-eye"],[1,"btn","btn-primary"],[1,"fas","fa-user-edit"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"d-flex","justify-content-center","my-1"],["role","status","aria-hidden","true",1,"spinner-border"]],template:function(n,i){1&n&&t.YNc(0,M,25,14,"div",0),2&n&&t.Q6J("appAccessControl",t.VKq(1,O,i.permissionType.VIEW_NEWS_AND_EVENTS))},directives:[x.J,p.sg,p.O5,d.yS],styles:['.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}table[_ngcontent-%COMP%]{border:2px solid #333333;box-sizing:border-box}thead[_ngcontent-%COMP%]{background:#E1EAFB;font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:16px;line-height:175.6%;color:#333}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:16px;line-height:175.6%;color:#333}.table-totals[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:normal;font-size:18px;line-height:175.6%;color:#000}']}),e})(),I=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-single-news-details"]],decls:2,vars:0,template:function(n,i){1&n&&(t.TgZ(0,"p"),t._uU(1,"single-news-details works!"),t.qZA())},styles:[""]}),e})();var a=o(3679),V=o(3815);function Y(e,s){1&e&&(t.TgZ(0,"button",17),t._uU(1,"Add News/Events"),t.qZA())}function z(e,s){1&e&&(t.TgZ(0,"button",18),t._uU(1,"Adding News..."),t.qZA())}let P=(()=>{class e{constructor(n,i,r){this.apiService=n,this.toastrService=i,this.formBuilder=r,this.loading=!0,this.submitting=!1}ngOnInit(){this.newsFormControls()}newsFormControls(){this.newsForm=this.formBuilder.group({title:["",[a.kI.required]],description:["",[a.kI.required]],target_audience:["",[a.kI.required]]})}get form(){return this.newsForm.controls}onNewsSubmit(){this.submitting=!0,this.apiService.addNews({description:this.form.description.value,target_audience:this.form.target_audience.value,title:this.form.title.value,banner_image:this.cardImageBase64}).subscribe(i=>{i?(this.toastrService.success(i.message),this.submitting=!1):(this.toastrService.error(i.message,"Failed"),this.submitting=!1)},i=>{this.toastrService.error(i.error.message,"Error"),this.submitting=!1})}handleFileInput(n){if(this.imageError=null,n.target.files&&n.target.files[0]){const i=20971520,r=["image/png","image/jpeg"],l=15200,f=25600;if(n.target.files[0].size>i)return this.imageError="Maximum size allowed is "+i/1e3+"Mb",this.toastrService.error(this.imageError,"Error"),!1;if(!V.includes(r,n.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",this.toastrService.error(this.imageError,"Error"),!1;const _=new FileReader;_.onload=h=>{const Z=new Image;Z.src=h.target.result,Z.onload=T=>{if(T.currentTarget.height>l&&T.currentTarget.width>f)return this.imageError="Maximum dimensions allowed "+l+"*"+f+"px",!1;this.cardImageBase64=h.target.result,this.isImageSaved=!0}},_.readAsDataURL(n.target.files[0])}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.s),t.Y36(u._W),t.Y36(a.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-news"]],decls:25,vars:3,consts:[[1,"content","mat-elevation-z8"],[1,"text-center","text-dark"],[1,"add-new-user"],[3,"formGroup","ngSubmit"],[1,"form-row","m-3"],[1,"col-md-4"],["for","title"],["type","text","id","title","formControlName","title","placeholder","Agriculture","required","",1,"form-control"],["for","description"],["type","text","id","description","formControlName","description","placeholder","","required","",1,"form-control"],["for","target_audience"],["type","text","id","target_audience","formControlName","target_audience","placeholder","","required","",1,"form-control"],["for","news_banner"],["type","file","id","news_banner","required","",1,"form-control-file",3,"change"],[1,"submission","m-4","text-right"],["class","btn btn-danger",4,"ngIf"],["class","btn btn-success",4,"ngIf"],[1,"btn","btn-danger"],[1,"btn","btn-success"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"Add News/Events"),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return i.onNewsSubmit()}),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t._uU(8,"Title"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"label",8),t._uU(12,"Description"),t.qZA(),t._UZ(13,"input",9),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"label",10),t._uU(16,"Target Audience"),t.qZA(),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"div",5),t.TgZ(19,"label",12),t._uU(20,"News Banner"),t.qZA(),t.TgZ(21,"input",13),t.NdJ("change",function(l){return i.handleFileInput(l)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",14),t.YNc(23,Y,2,0,"button",15),t.YNc(24,z,2,0,"button",16),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(4),t.Q6J("formGroup",i.newsForm),t.xp6(19),t.Q6J("ngIf",!i.submitting),t.xp6(1),t.Q6J("ngIf",i.submitting))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,p.O5],styles:['.content[_ngcontent-%COMP%]{height:calc(100vh - 98px);border-radius:10px;margin:16px 32px;font-size:2rem;color:#d3d3d3}label[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:500;font-size:20px;line-height:36px;color:#000}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-style:normal;font-weight:600;font-size:18px;line-height:27px;color:#b7b7b7}']}),e})();var Q=o(8668);const W=[{path:"",component:N.k,canActivate:[Q.a],children:[{path:"news-list",component:F},{path:"news-list/details",component:I},{path:"add-news",component:P}]}];let B=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(W)],d.Bz]}),e})(),K=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,B]]}),e})()}}]);